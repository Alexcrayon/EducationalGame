/*
 * A8-An-Educational-App
 * A cryptography tower defense game
 * CS3505 - 4/27/2023
 * Authors: Samuel Powell, Spencer Robinson, Alex Cao, Jaran Holt, Camden Yates
 *
 * */
#include "malwaredialog.h"
#include "ui_malwaredialog.h"
#include "game.h"
#include <random>
#include <QPainter>

MalwareDialog::MalwareDialog(Game* game, QWidget *parent) :
    QDialog(parent), ui(new Ui::MalwareDialog) {
    this->game = game;
    ui->setupUi(this);

    int randInt = 25 + rand() % 250;
    ui->confirm->move(ui->confirm->x(), randInt);
    randInt = 25 + rand() % 250;
    ui->cancel->move(ui->cancel->x(), randInt);

    randInt = 1 + rand() % 7;

    switch(randInt)
    {
    case 1:
        imageBack = QImage(":/sprites/GameImages/Adware_a.png");
        break;
    case 2:
        imageBack = QImage(":/sprites/GameImages/Adware_b.png");
        break;
    case 3:
        imageBack = QImage(":/sprites/GameImages/Adware_c.png");
        break;
    case 4:
        imageBack = QImage(":/sprites/GameImages/Adware_d.png");
        break;
    case 5:
        imageBack = QImage(":/sprites/GameImages/Adware_e.png");
        break;
    case 6:
        imageBack = QImage(":/sprites/GameImages/Adware_f.png");
        break;
    case 7:
        imageBack = QImage(":/sprites/GameImages/Adware_g.png");
        break;
    }
}

MalwareDialog::~MalwareDialog() {
    delete ui;
}

void MalwareDialog::on_confirm_clicked()
{
    game->updateHealth(-2);
    optionClicked();
}

void MalwareDialog::on_cancel_clicked()
{
    game->updateHealth(-2);
    optionClicked();
}

void MalwareDialog::optionClicked()
{
    this->close();
}

void MalwareDialog::paintEvent(QPaintEvent *)
{
    QPainter painter(this);
    backBounds = QRectF(5,5, 675, 295);
    painter.drawImage(backBounds, imageBack);
}
